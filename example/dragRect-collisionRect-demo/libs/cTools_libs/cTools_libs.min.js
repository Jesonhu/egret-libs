var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},cTools_libs;!function(t){var e=function(){function t(){this.CLASSNAME="CollisionManager"}return t.hitTestRect=function(t,e){var i=t.getBounds(),s=e.getBounds();return i.x=t.x,i.y=t.y,s.x=e.x,s.y=e.y,i.intersects(s)},t.prototype.toString=function(){return this.CLASSNAME},t}();t.CollisionManager=e,__reflect(e.prototype,"cTools_libs.CollisionManager")}(cTools_libs||(cTools_libs={}));var cTools_libs;!function(t){var e=function(e){function i(t,i,s){var n=e.call(this)||this;if(n.CLASS_NAME="DragManagerRect",n._isDrag=!1,n._excludeLeftWidth=0,n._excludeRightWidth=0,n._excludeTopHeight=0,n._excludeBottomHeight=0,!t)return n;n._display=t,n._stage=i,n._distance||(n._distance=new egret.Point),n._display.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onTouchDown,n),n._display.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,n.onTouchUp,n),n._display.addEventListener(egret.TouchEvent.TOUCH_END,n.onTouchUp,n),n._stage.addEventListener(egret.Event.LEAVE_STAGE,n.onTouchUp,n),n._stage instanceof egret.Stage?(n._stageWidth=n._stage.stageWidth,n._stageHeight=n._stage.stageHeight):(n._stageWidth=n._stage.width,n._stageHeight=n._stage.height),n._excludeRightWidth=30;var o=n._stageWidth-n._excludeLeftWidth-n._excludeRightWidth,h=(n._stageHeight-n._excludeTopHeight-n._excludeBottomHeight,new egret.Rectangle(0,0,o,n._stageHeight));return n._bounds=s?s:h,n}return __extends(i,e),i.prototype.onTouchDown=function(e){this._stage.setChildIndex(this._display,this._stage.numChildren-1),this._distance.x=e.stageX-this._display.x,this._distance.y=e.stageY-this._display.y,this.checkBoundary(this._display,this._bounds),this._isDrag=!0,this._dispalyDown=this._display,this._isDrag&&(this._stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.dispatchEventWith(t.DragEvent.DRAG_START))},i.prototype.onTouchMove=function(e){this._isDrag&&this._dispalyDown==this._display&&(this._display.x=e.stageX-this._distance.x,this._display.y=e.stageY-this._distance.y,this.checkBoundary(this._display,this._bounds),this.dispatchEventWith(t.DragEvent.DRAG_MOVE))},i.prototype.onTouchUp=function(e){this._display&&this._dispalyDown==this._display&&(this._isDrag=!1,this._stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this._stage.removeEventListener(egret.Event.LEAVE_STAGE,this.onTouchUp,this),this.dispatchEventWith(t.DragEvent.DRAG_STOP))},i.prototype.addEventListeners=function(){this._display.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchDown,this),this._display.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this._display.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchUp,this),this._stage.addEventListener(egret.Event.LEAVE_STAGE,this.onTouchUp,this)},i.prototype.removeEventListeners=function(){this._display.hasEventListener(egret.TouchEvent.TOUCH_BEGIN)&&this._display.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchDown,this),this._display.hasEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE)&&this._display.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchUp,this),this._display.hasEventListener(egret.TouchEvent.TOUCH_END)&&this._display.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchUp,this),this._stage.hasEventListener(egret.Event.LEAVE_STAGE)&&this._stage.removeEventListener(egret.Event.LEAVE_STAGE,this.onTouchUp,this)},i.prototype.removeDrag=function(){this.removeEventListeners()},i.prototype.restoreDrag=function(){this.addEventListeners()},i.prototype.checkBoundary=function(t,e){t.x>=e.width-t.width&&(t.x=e.width-t.width),t.x<=e.x&&(t.x=e.x),t.y>=e.height-t.height&&(t.y=e.height-t.height),t.y<=e.y&&(t.y=e.y)},Object.defineProperty(i.prototype,"dragDisplay",{get:function(){return this._display},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDrag",{get:function(){return this._isDrag},set:function(t){this._isDrag=t},enumerable:!0,configurable:!0}),i.prototype.remove=function(){this._stage&&this._display&&this._stage.removeChild(this._display)},i.prototype.toString=function(){return this.CLASS_NAME},i}(egret.EventDispatcher);t.DragManagerRect=e,__reflect(e.prototype,"cTools_libs.DragManagerRect",["egret.IEventDispatcher"])}(cTools_libs||(cTools_libs={}));var cTools_libs;!function(t){var e=function(){function t(){}return t.DRAG_START="dragsSart",t.DRAG_MOVE="dragMove",t.DRAG_STOP="dragStop",t}();t.DragEvent=e,__reflect(e.prototype,"cTools_libs.DragEvent")}(cTools_libs||(cTools_libs={}));